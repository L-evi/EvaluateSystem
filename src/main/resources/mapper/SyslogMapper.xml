<?xml version="1.0" encoding="UTF-8"?>
<!-- 用户User所用数据库语句文件 -->
<!-- 参考链接：http://c.biancheng.net/mybatis/mapper.html -->
<!-- 记得提供扫描入口，参考链接：https://blog.csdn.net/weixin_42109200/article/details/117412010 -->
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.project.evaluate.dao.SyslogDao">
    <insert id="insertSyslog" useGeneratedKeys="true">
        INSERT INTO syslogDO(module, action, conditions, result, status, logTime, operator,IP)
        VALUES (#{module}, #{action}, #{conditions}, #{result}, #{status}, #{logTime}, #{operator},#{IP})
    </insert>
    <delete id="deletePageSyslog">
        DELETE
        FROM syslogDO
        WHERE ID IN
        <foreach collection="ids" open="(" close=")" separator="," item="id">
            #{id}
        </foreach>
    </delete>
    <delete id="deleteSyslogByID">
        DELETE
        FROM syslogDO
        WHERE ID = #{ID}
    </delete>
    <select id="selectByID" resultType="com.project.evaluate.entity.DO.SyslogDO">
        SELECT ID,
               module,
               action,
               conditions,
               result,
               status,
               logTime,
               operator,
               IP
        FROM syslogDO
        WHERE ID = #{ID}
    </select>
    <select id="selectPageSysLog" resultType="com.project.evaluate.entity.DO.SyslogDO">
        SELECT ID, module, action, conditions, result, status, logTime, operator,IP
        FROM syslogDO
        <where>
            <if test="syslogDO.module != null and syslogDO.module !=''">
                module = #{syslogDO.module}
            </if>
            <if test="syslogDO.action != null and syslogDO.action != ''">
                AND `action` = #{syslogDO.action}
            </if>
            <if test="syslogDO.status != null and syslogDO.status !=''">
                AND `status` = #{syslogDO.status}
            </if>
            <if test="beforeTime != null and afterTime != null">
                AND logTime BETWEEN beforeTime and afterTime
            </if>
            <if test="syslogDO.operator != null and syslogDO.operator != ''">
                AND operator = #{syslogDO.operator}
            </if>
            <if test="syslogDO.IP != null and syslogDO.IP != ''">
                AND IP = #{IP}
            </if>
        </where>
    </select>
</mapper>